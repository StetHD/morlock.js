/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){if(typeof define=="function"&&define.amd)define(t);else{var n=t();e.ResizeController=n.ResizeController,e.ResponsiveImage=n.ResponsiveImage,e.ScrollController=n.ScrollController}})(this,function(){var e,t,n;return function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&&t.split("/"),d=l.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(f=0;f<e.length;f+=1){h=e[f];if(h===".")e.splice(f,1),f-=1;else if(h===".."){if(f===1&&(e[2]===".."||e[0]===".."))break;f>0&&(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&&v&&v[r]&&(u=v[r],a=f)}!s&&u&&(s=u,o=a),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!d(a,e)&&!d(c,e))throw new Error("No "+e);return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];return e=r[1],i&&(i=v(i,t),n=b(i)),i?n&&n.normalize?e=n.normalize(e,g(t)):e=v(e,t):(e=v(e,t),r=w(e),i=r[0],e=r[1],i&&(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return m(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}},i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(v=0;v<t.length;v+=1){p=o(t[v],i),l=p.f;if(l==="require")g[v]=u.require(e);else if(l==="exports")g[v]=u.exports(e),w=!0;else if(l==="module")s=g[v]=u.module(e);else if(d(a,l)||d(f,l)||d(c,l))g[v]=b(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,m(i,!0),y(l),{}),g[v]=a[l]}}h=n.apply(a[e],g);if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!w)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){return typeof e=="string"?u[e]?u[e](t):b(o(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s)},s.config=function(e){return l=e,l.deps&&s(l.deps,l.callback),s},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!d(a,e)&&!d(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("../vendor/almond",function(){}),n("morlock/core/util",["exports"],function(e){function t(e,t){return Array.prototype.slice.call(e,t)}function n(e){return t(e,0)}function r(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function i(e,t){var n,r=0;return function(){var i=arguments,s=+(new Date),o=t-(s-r);o<=0?(clearTimeout(n),n=null,r=s,P(e,i)):n||(n=setTimeout(function(){r=+(new Date),n=null,P(e,i)},o))}}function s(e,t){var n=null;return function(){clearTimeout(n),n=setTimeout(function(){n=null,e()},t)}}function o(e,t,n){var r=document.documentElement;return f("(min-"+e+":"+window[t]+"px)")?function(){return window[t]}:function(){return r[n]}}function f(e){var t=window.matchMedia||window.msMatchMedia;if(t)return!!t(e).matches;var n=document.createElement("div");return n.id="testmq",n.innerHTML='<style id="stestmq">@media '+e+" { #testmq { position: absolute; } }</style>",document.body.appendChild(n),(window.getComputedStyle?getComputedStyle(n,null):n.currentStyle)["position"]=="absolute"}function l(e,t){t=typeof t=="number"&&t||0,e&&!e.nodeType&&(e=e[0]);if(!e||1!==e.nodeType)return!1;var n=e.getBoundingClientRect(),r={right:n.right+t,left:n.left-t,bottom:n.bottom+t,top:n.top-t};return r.width=r.right-r.left,r.height=r.bottom-r.top,r}function c(e,t){return x(function(n,r){return n[r]=e(t[r],r),n},d(t),{})}function h(e,t){return x(function(t,n){return X(t,e(n))},t,[])}function p(e,n){var r=t(arguments,2);return c(function(e){return e[n].apply(e,r)},e)}function d(e){if(Object.keys)return Object.keys(e);var t=[];return c(e,function(e,n){t.push(n)}),t}function v(e,t){return e[t]}function m(e,t,n){e[t]=n}function g(e){return function(){P(e,Array.prototype.reverse.call(arguments))}}function y(e){return e.length<=0}function b(e){return h(O(v,e),d(e))}function w(e){this.fn=e}function E(e){var t=function(){var t=e.apply(this,arguments);while(t instanceof w)t=t.exec();return t};return t.original_fn=e,t}function S(e){var t=this,n=H(arguments);return e.original_fn instanceof Function?new w(function(){return e.original_fn.apply(t,n)}):new w(function(){return e.apply(t,n)})}function x(e,t,n){var r=E(function i(t,n){return y(n)?t:S(i,e(t,I(n)),H(n))});return r(n,t)}function T(e,t){return x(function(t,n){return R(e(n))?X(t,n):t},t,[])}function N(e,t){return x(function(t,n){return R(e(n))?t:X(t,n)},t,[])}function C(e){return!e}function k(e,t){return e===t}function L(e,t){return function(){var n=e;"function"==typeof e&&(n=P(e,arguments));if(n)return P(t,arguments)}}function A(e,t){return Function.prototype.bind?e.bind(t):function(){return e.apply(t,arguments)}}function O(e){var n=H(arguments);return function(){var r=t(arguments,0);return e.apply(this,n.concat(r))}}function M(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function _(e,t){return function(){setTimeout(P(O,e,arguments),t)}}function D(e,t){return _(e,"undefined"!=typeof t?1:t)}function P(e,t){return e.apply(null,t)}function H(e,n){return n="undefined"!=typeof n?n:1,t(e,n)}function B(e){return P(e,H(arguments))}function j(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)};if(e.attachEvent)return e.attachEvent("on"+t,n),function(){e.detachEvent("on"+t,n)}}function F(e,t){return t[e]}function I(e){return e[0]}function q(e){return e[e.length-1]}function U(e){return[e]}function z(e,t){var r=n(e);return Array.prototype.unshift.call(r,t),r}function W(e,t){var r=n(e);return Array.prototype.shift.call(r,t),r}function X(e,t){var r=n(e);return Array.prototype.push.call(r,t),r}function V(e,t){var r=n(e);return Array.prototype.sort.call(r,t),r}function $(){var e=arguments;return function(t){for(var n=e.length-1;n>=0;--n)t=e[n](t);return t}}function J(e){var t=H(arguments),n=!1;return function(){if(!n)return n=!0,P(e,t)}}function K(e){return parseInt(e,10)}var u=o("width","innerWidth","clientWidth"),a=o("height","innerHeight","clientHeight");w.prototype.exec=function(){return this.fn()};var R=O(k,!0);e.indexOf=r,e.throttle=i,e.debounce=s,e.getViewportHeight=a,e.getViewportWidth=u,e.testMQ=f,e.getRect=l,e.mapObject=c,e.objectKeys=d,e.functionBind=A,e.partial=O,e.arrayIndexOf=M,e.map=h,e.apply=P,e.objectVals=b,e.call=B,e.push=X,e.unshift=z,e.equals=k,e.delay=_,e.unshift=z,e.nth=F,e.first=I,e.last=q,e.compose=$,e.select=T,e.isTrue=R,e.get=v,e.shift=W,e.eventListener=j,e.when=L,e.reduce=x,e.once=J,e.sortBy=V,e.parseInteger=K,e.set=m,e.flip=g,e.trampoline=E,e.tailCall=S,e.copyArray=n,e.defer=D,e.slice=t}),n("morlock/core/stream",["morlock/core/util","exports"],function(e,t){function w(e){if(!(this instanceof w))return new w(e);this.trackSubscribers=!!e,this.subscribers=[],this.subscriberSubscribers=this.trackSubscribers?[]:null,this.streamID=b++,this.value=null}function E(e){return new w(e)}function S(e,t){s(d(g(y),t),e.subscribers),e.value=t}function x(e){return e.value}function T(e,t){e.subscribers.push(t),e.trackSubscribers&&s(d(g(y),t),e.subscriberSubscribers)}function N(e,t){e.trackSubscribers&&e.subscriberSubscribers.push(t)}function C(e,t){var n=E(!0),r=d(S,n),i=d(c,e,t,r);return N(n,v(i)),n}function k(e){var t=E(!0),n=d(S,t),r=d(setInterval,n,e);return N(t,v(r)),t}function L(){function n(e){t(e),requestAnimationFrame(n)}var e=E(!0),t=d(S,e);return N(e,v(n)),e}function A(){var e=m(arguments),t=E(),n=d(S,t);return s(function(e){return T(e,n)},e),t}function O(e,t,n){var r=E(),i=d(S,r),s=P(function(e){return e===":e:"?i:e},n);return T(e,d(t,s)),r}function M(e,t){return e<=0?t:O(t,i,[":e:",e])}function _(e,t){return e<=0?t:O(t,r,[":e:",e])}function D(e,t){return e<=0?t:O(t,n,[":e:",e])}function P(e,t){return O(t,h,[":e:",e])}function H(e,t){return O(t,p,[e,":e:"])}function B(e,t){return O(stream,h,[":e:",d(x,e)])}var n=e.debounce,r=e.throttle,i=e.delay,s=e.map,o=e.first,u=e.rest,a=e.push,f=e.apply,l=e.unshift,c=e.eventListener,h=e.compose,p=e.when,d=e.partial,v=e.once,m=e.copyArray,g=e.flip,y=e.call,b=0;t.create=E,t.emit=S,t.getValue=x,t.onValue=T,t.onSubscription=N,t.createFromEvents=C,t.timeout=k,t.createFromRAF=L,t.merge=A,t.delay=M,t.throttle=_,t.debounce=D,t.map=P,t.filter=H,t.sample=B}),n("morlock/streams/breakpoint-stream",["morlock/core/util","morlock/core/stream","exports"],function(e,t,n){function l(e,t){var n=s(function(e,n){var r=f.create(),s="string"==typeof e?e:c(e);return f.onValue(t,function(){var e=f.getValue(r);e="undefined"!=typeof e?e:!1,e!==a(s)&&f.emit(r,!e)}),f.map(i(u,[n]),r)},e);return o(f.merge,r(n))}function c(e){var t;return"undefined"!=typeof e.mq?t=e.mq:(e.max="undefined"!=typeof e.max?e.max:Infinity,e.min="undefined"!=typeof e.min?e.min:0,t="only screen",e.max<Infinity&&(t+=" and (max-width: "+e.max+"px)"),e.min>0&&(t+=" and (min-width: "+e.min+"px)")),t}var r=e.objectVals,i=e.partial,s=e.mapObject,o=e.apply,u=e.push,a=e.testMQ,f=t;n.create=l}),n("morlock/streams/resize-stream",["morlock/core/util","morlock/core/stream","exports"],function(e,t,n){function s(e){e=e||{};var t="undefined"!=typeof e.throttleMs?e.throttleMs:200,n="undefined"!=typeof e.orientationChangeDelayMs?e.orientationChangeDelayMs:100,s=i.merge(i.throttle(t,i.createFromEvents(window,"resize")),i.delay(n,i.createFromEvents(window,"orientationchange")));return r(function(){window.dispatchEvent(new Event("resize"))}),s}var r=e.defer,i=t;n.create=s}),n("morlock/controllers/resize-controller",["morlock/core/util","morlock/core/stream","morlock/streams/breakpoint-stream","morlock/streams/resize-stream","exports"],function(e,t,n,r,i){function y(e){if(!(this instanceof y))return new y(e);e=e||{};var t=g.create(e),n;"undefined"!=typeof e.breakpoints&&(n=m.create(e.breakpoints,t)),this.on=function(e,r){"resize"===e?v.onValue(v.map(function(){return[window.innerWidth,window.innerHeight]},t),r):"breakpoint"===e&&n&&v.onValue(v.map(function(e){return[a(e),e[1]?"enter":"exit"]},n),r)};var r={};n&&v.onValue(n,function(e){r[e[0]]=e[1]}),this.getActiveBreakpoints=function(){var t=f(l,o(h,r));return c(t,s(r))}}var s=e.objectKeys,o=e.partial,u=e.equals,a=e.first,f=e.compose,l=e.isTrue,c=e.select,h=e.get,p=e.shift,d=e.nth,v=t,m=n,g=r;i["default"]=y}),n("morlock/streams/scroll-stream",["morlock/core/util","morlock/core/stream","exports"],function(e,t,n){function s(e){e=e||{};var t="undefined"!=typeof e.debounceMs?e.debounceMs:200,n=i.debounce(t,i.createFromEvents(window,"scroll"));return r(function(){window.dispatchEvent(new Event("scroll"))}),n}var r=e.defer,i=t;n.create=s}),n("morlock/streams/element-tracker-stream",["morlock/core/util","morlock/core/stream","exports"],function(e,t,n){function o(e,t,n){function f(){u=r(),l()}function l(){var t=i(e),n=!!t&&t.bottom>=0&&t.top<=u;a&&!n?(a=!1,o.emit("exit")):!a&&n&&(a=!0,o.emit("enter"))}var o=s.create(),u,a=!1;return s.onValue(t,l),s.onValue(n,f),f(),o}var r=e.getViewportHeight,i=e.getRect,s=t;n.create=o}),n("morlock/controllers/scroll-controller",["morlock/core/util","morlock/core/stream","morlock/streams/scroll-stream","morlock/streams/resize-stream","morlock/streams/element-tracker-stream","exports"],function(e,t,n,r,i,s){function h(e){if(!(this instanceof h))return new h(e);var t=f.create(e);this.on=function(e,n){"scrollEnd"===e&&a.onValue(t,n)};var n=l.create();this.observeElement=function(r){var i=c.create(r,t,n);return{on:function(t,n){a.onValue(a.filter(o(u,t),i),n)}}}}var o=e.partial,u=e.equals,a=t,f=n,l=r,c=i;s["default"]=h}),n("morlock/core/responsive-image",["morlock/core/util","exports"],function(e,t){function l(){if(!(this instanceof l))return new l;this.element=null,this.loadedSizes={},this.knownSizes=[],this.currentBreakpoint=null,this.src=null,this.hasWebp=!1,this.isFlexible=!1,this.hasRetina=!1,this.preserveAspectRatio=!1,this.knownDimensions=null}function c(e){var t=new l;return r(a(i(u,t)),e),t.knownDimensions&&t.preserveAspectRatio&&p(t),t}function h(e){var t={};t.element=e,t.src=e.getAttribute("data-src"),t.hasWebp=e.getAttribute("data-hasWebp")==="true",t.isFlexible=e.getAttribute("data-isFlexible")!=="false",t.hasRetina=e.getAttribute("data-hasRetina")==="true"&&window.devicePixelRatio>1.5,t.preserveAspectRatio=e.getAttribute("data-preserveAspectRatio")==="true";var n=e.getAttribute("data-knownDimensions");return n&&n!=="false"&&(t.knownDimensions=[o(n.split("x")[0]),o(n.split("x")[1])]),t.knownSizes=d(t.element),t.knownDimensions&&t.preserveAspectRatio&&p(t),c(t)}function p(e){e.element.style.paddingBottom=e.knownDimensions[1]/e.knownDimensions[0]*100+"%"}function d(e){var t=e.getAttribute("data-breakpoints"),r=n(function(e){return o(e)},t?t.split(","):[]);return r.length<=0?[0]:s(r,function(t,n){return n-t})}function v(e){var t;for(var n=0;n<e.knownSizes.length;n++){var r=e.knownSizes[n],i="only screen and (max-width: "+r+"px)";n===0&&(i="only screen");if(!f(i))break;t=r}t!==e.currentBreakpoint&&(e.currentBreakpoint=t,m(e,e.currentBreakpoint))}function m(e,t){var n=e.loadedSizes[t];if("undefined"!=typeof n)g(e,n);else{var r=new Image;r.onload=function(){e.loadedSizes[t]=r,g(e,r)},r.src=w(e,t)}}function g(e,t){return e.type==="img"?y(e,t):b(e,t)}function y(e,t){e.element.src=t.src}function b(e,t){e.element.style.backgroundImage="url("+t.src+")";if(e.preserveAspectRatio){var n=Modernizr.prefixed("backgroundSize");e.element.style[n]="cover";var r,i;e.knownDimensions?(r=e.knownDimensions[0],i=e.knownDimensions[1]):(r=t.width,i=t.height),e.isFlexible?e.element.style.paddingBottom=i/r*100+"%":(e.element.style.width=r+"px",e.element.style.height=i+"px")}}function w(e,t){if(t===0)return e.src;var n=e.src.split("."),r=n.pop(),i=e.hasWebp&&Modernizr.webp?"webp":r;return n.join(".")+"-"+t+(e.hasRetina?"@2x":"")+"."+i}var n=e.map,r=e.mapObject,i=e.partial,s=e.sortBy,o=e.parseInteger,u=e.set,a=e.flip,f=e.testMQ;t.create=c,t.createFromElement=h,t.update=v}),n("morlock/plugins/jquery.breakpointer",["morlock/controllers/resize-controller"],function(e){var t=e["default"];"undefined"!=typeof $&&($.fn.breakpointer=function(){})}),n("morlock/plugins/jquery.scrolltracker",["morlock/controllers/scroll-controller"],function(e){var t=e["default"];"undefined"!=typeof $&&($.fn.scrolltracker=function(){})}),n("morlock/plugins/jquery.eventstream",["morlock/core/util","morlock/core/stream"],function(e,t){var n=e.map,r=t;"undefined"!=typeof $&&($.fn.eventstream=function(e){var t=this,i=n(function(t){var n=r.create(),i=$(t);return i.on(e,function(e){r.emit(n,e)}),i.data("stream",n),n},t);if(i.length>1)var s=r.merge(i);return t})}),n("morlock",["morlock/controllers/resize-controller","morlock/controllers/scroll-controller","morlock/core/responsive-image","morlock/plugins/jquery.breakpointer","morlock/plugins/jquery.scrolltracker","morlock/plugins/jquery.eventstream","exports"],function(e,t,n,r,i,s,o){var u=e["default"],a=t["default"],f=n;o.ResizeController=u,o.ResponsiveImage=f,o.ScrollController=a}),t(["morlock"]),t("morlock")});